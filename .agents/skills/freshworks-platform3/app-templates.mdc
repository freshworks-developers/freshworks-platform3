---
description: Complete Platform 3.0 App Templates - Working code examples for all app types
alwaysApply: true
---

# Platform 3.0 App Templates

**CRITICAL ENFORCEMENT:**
- ❌ NEVER use `"whitelisted-domains"` - It's Platform 2.3 syntax, deprecated and invalid in 3.0
- ❌ NEVER use `"product"` structure - Use `"modules"` in Platform 3.0
- ❌ NEVER use plain HTML buttons/inputs - Use Crayons components ONLY
- ✅ ALWAYS start with skeleton templates below
- ✅ ALWAYS use `"modules"` structure
- ✅ ALWAYS include `"engines"` block
- ✅ ALWAYS use Crayons components for UI (fw-button, fw-input, fw-select, etc.)
- ✅ ALWAYS include Crayons CDN in HTML files

---

## Understanding Product Context

When user says "Freshdesk app" or "Freshservice app":
- ❌ DOES NOT mean product-specific manifest structure
- ✅ DOES mean use the appropriate module for that product

**Module Mapping:**
- "Freshdesk app" → Use `support_ticket`, `support_contact`, etc. modules
- "Freshservice app" → Use `service_ticket`, `service_asset`, etc. modules
- "Freshsales app" → Use `deal`, `contact`, `account` modules

**Base template is ALWAYS the same - only the module name changes!**

---

## Template Selection Matrix

| User Need | Template | Modules to Use |
|-----------|----------|----------------|
| Frontend UI only | Template 1 (Frontend) | common + product module with location |
| Serverless events | Template 2 (Serverless) | common + product module with events |
| Frontend + Backend API | Template 3 (Hybrid) | common (requests + functions) + product module (location) |
| OAuth integration | Template 4 (OAuth) | common (requests + functions + oauth) + product module |

---

## Template 1: Frontend App

**Use Case:** UI-only app with no backend logic

### App Structure
```
my-app/
├── app/
│   ├── index.html
│   ├── scripts/
│   │   └── app.js
│   └── styles/
│       ├── style.css
│       └── images/
│           └── icon.svg
├── manifest.json
└── README.md
```

### manifest.json (CORRECT PLATFORM 3.0)
```json
{
  "platform-version": "3.0",
  "modules": {
    "common": {
      "requests": {}
    },
    "support_ticket": {
      "location": {
        "ticket_sidebar": {
          "url": "index.html",
          "icon": "styles/images/icon.svg"
        }
      }
    }
  },
  "engines": {
    "node": "18.20.8",
    "fdk": "9.7.4"
  }
}
```

### app/scripts/app.js
```javascript
let client;

init();

async function init() {
  client = await app.initialized();
  client.events.on('app.activated', renderText);
}

async function renderText() {
  const textElement = document.getElementById('apptext');
  const contactData = await client.data.get('contact');
  const {
    contact: { name }
  } = contactData;

  textElement.innerHTML = `Ticket is created by ${name}`;
}
```

### app/index.html
```html
<!DOCTYPE html>
<html lang="en">
<head>
  <title>My App</title>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <script async src="{{{appclient}}}"></script>
  <link rel="stylesheet" type="text/css" href="styles/style.css" />
</head>
<body>
  <div class="main">
    <p id="apptext"></p>
  </div>
</body>
<script defer src="scripts/app.js"></script>
<!-- REQUIRED: Crayons CDN for UI components -->
<script async type="module" src="https://cdn.jsdelivr.net/npm/@freshworks/crayons@v4/dist/crayons/crayons.esm.js"></script>
<script async nomodule src="https://cdn.jsdelivr.net/npm/@freshworks/crayons@v4/dist/crayons/crayons.js"></script>
</html>
```

### app/styles/style.css
```css
.main {
  padding: 20px;
  font-family: Arial, sans-serif;
}
```

### app/styles/images/icon.svg
```xml
<svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 64 64">
  <rect width="64" height="64" fill="#2C5CC5"/>
  <text x="32" y="40" font-size="32" fill="white" text-anchor="middle" font-family="Arial">A</text>
</svg>
```

**Freshservice variant:** Change `"support_ticket"` to `"service_ticket"`
**Freshsales variant:** Change `"support_ticket"` to `"deal"` or `"contact"`

---

## Template 2: Serverless App

**Use Case:** Backend-only app with events, no UI

### App Structure
```
my-serverless-app/
├── server/
│   └── server.js
├── config/
│   └── iparams.json
├── manifest.json
└── README.md
```

### manifest.json (CORRECT PLATFORM 3.0)
```json
{
  "platform-version": "3.0",
  "modules": {
    "common": {
      "events": {
        "onAppInstall": {
          "handler": "onAppInstallHandler"
        },
        "onAppUninstall": {
          "handler": "onAppUninstallHandler"
        }
      }
    },
    "support_ticket": {
      "events": {
        "onTicketCreate": {
          "handler": "onTicketCreateHandler"
        }
      }
    }
  },
  "engines": {
    "node": "18.20.8",
    "fdk": "9.7.4"
  }
}
```

### server/server.js
```javascript
exports = {
  onTicketCreateHandler: function(args) {
    console.log('Hello ' + args['data']['requester']['name']);
  },
  
  onAppInstallHandler: function(args) {
    console.info('onAppInstallHandler invoked with following data: \n', args);
  },
  
  onAppUninstallHandler: function(args) {
    console.log('onAppUninstallHandler invoked with following data: \n', args);
  }
};
```

**Freshservice variant:** Change `"support_ticket"` to `"service_ticket"` and use `onTicketCreate` event

**Adding External API calls:**
```json
{
  "modules": {
    "common": {
      "requests": {
        "notifyExternalService": {}
      }
    }
  }
}
```

---

## Template 3: Hybrid App (Frontend + Backend SMI)

**Use Case:** Frontend UI that calls backend methods for external API calls

### App Structure
```
my-hybrid-app/
├── app/
│   ├── index.html
│   ├── scripts/
│   │   └── app.js
│   └── styles/
│       ├── style.css
│       └── images/
│           └── icon.svg
├── server/
│   └── server.js
├── config/
│   ├── iparams.json
│   └── requests.json
├── manifest.json
└── README.md
```

### manifest.json (CORRECT PLATFORM 3.0)
```json
{
  "platform-version": "3.0",
  "modules": {
    "common": {
      "requests": {
        "externalApiCall": {}
      },
      "functions": {
        "fetchExternalData": {}
      }
    },
    "support_ticket": {
      "location": {
        "ticket_sidebar": {
          "url": "index.html",
          "icon": "styles/images/icon.svg"
        }
      }
    }
  },
  "engines": {
    "node": "18.20.8",
    "fdk": "9.7.4"
  }
}
```

### config/requests.json
```json
{
  "externalApiCall": {
    "schema": {
      "method": "GET",
      "host": "api.example.com",
      "path": "/data",
      "headers": {
        "Authorization": "Bearer {{api_key}}"
      }
    }
  }
}
```

### config/iparams.json
```json
{
  "api_key": {
    "display_name": "API Key",
    "description": "Enter your API key",
    "type": "text",
    "required": true,
    "secure": true
  }
}
```

### app/index.html
```html
<!DOCTYPE html>
<html lang="en">
<head>
  <title>Hybrid App</title>
  <meta charset="UTF-8" />
  <script async src="{{{appclient}}}"></script>
  <link rel="stylesheet" href="styles/style.css" />
</head>
<body>
  <div class="main">
    <fw-label value="Fetch Data from External API"></fw-label>
    <fw-button id="btnFetch" color="primary">Fetch Data</fw-button>
    <div id="result"></div>
  </div>
</body>
<script defer src="scripts/app.js"></script>
<!-- REQUIRED: Crayons CDN -->
<script async type="module" src="https://cdn.jsdelivr.net/npm/@freshworks/crayons@v4/dist/crayons/crayons.esm.js"></script>
<script async nomodule src="https://cdn.jsdelivr.net/npm/@freshworks/crayons@v4/dist/crayons/crayons.js"></script>
</html>
```

### app/scripts/app.js
```javascript
let client;

init();

async function init() {
  client = await app.initialized();
  client.events.on('app.activated', onAppActivate);
}

async function onAppActivate() {
  // Use Crayons button event listener
  const btn = document.getElementById('btnFetch');
  btn.addEventListener('fwClick', fetchData);
}

async function fetchData() {
  try {
    const result = await client.request.invoke('fetchExternalData', {
      param1: 'value1'
    });
    document.getElementById('result').innerHTML = JSON.stringify(result);
  } catch (error) {
    console.error('Error:', error);
  }
}
```

### server/server.js
```javascript
exports = {
  fetchExternalData: async function(args) {
    const { param1 } = args;
    const iparams = args.iparams;

    try {
      const response = await $request.invokeTemplate('externalApiCall', {
        context: {},
        body: JSON.stringify({ query: param1 })
      });

      return { success: true, data: response.response };
    } catch (error) {
      console.error('API Error:', error);
      return { success: false, error: error.message };
    }
  }
};
```

**Freshservice variant:** Change `"support_ticket"` to `"service_ticket"`

---

## Template 4: OAuth App

**Use Case:** Third-party OAuth integration (GitHub, Jira, etc.)

**CRITICAL: Platform 3.0 OAuth requires `integrations` wrapper!**

### App Structure
```
my-oauth-app/
├── app/
│   ├── index.html
│   ├── scripts/
│   │   └── app.js
│   └── styles/
│       ├── style.css
│       └── images/
│           └── icon.svg
├── server/
│   └── server.js
├── config/
│   ├── iparams.json
│   ├── requests.json
│   └── oauth_config.json
├── manifest.json
└── README.md
```

### manifest.json (CORRECT PLATFORM 3.0)
```json
{
  "platform-version": "3.0",
  "modules": {
    "common": {
      "requests": {
        "getOAuthResource": {}
      },
      "functions": {
        "fetchOAuthData": {}
      }
    },
    "support_ticket": {
      "location": {
        "ticket_sidebar": {
          "url": "index.html",
          "icon": "styles/images/icon.svg"
        }
      }
    }
  },
  "engines": {
    "node": "18.20.8",
    "fdk": "9.7.4"
  }
}
```

### config/oauth_config.json
```json
{
  "integrations": {
    "github": {
      "display_name": "GitHub",
      "client_id": "{{client_id}}",
      "client_secret": "{{client_secret}}",
      "authorize_url": "https://github.com/login/oauth/authorize",
      "token_url": "https://github.com/login/oauth/access_token",
      "token_type": "account",
      "options": {
        "scope": "repo"
      }
    }
  }
}
```

### config/requests.json
```json
{
  "getOAuthResource": {
    "schema": {
      "method": "GET",
      "host": "api.github.com",
      "path": "/user/repos",
      "headers": {
        "Authorization": "bearer <%= access_token %>"
      }
    },
    "options": {
      "oauth": "github"
    }
  }
}
```

### config/iparams.json
```json
{
  "client_id": {
    "display_name": "GitHub Client ID",
    "description": "Enter your GitHub OAuth App Client ID",
    "type": "text",
    "required": true
  },
  "client_secret": {
    "display_name": "GitHub Client Secret",
    "description": "Enter your GitHub OAuth App Client Secret",
    "type": "text",
    "required": true,
    "secure": true
  }
}
```

### server/server.js
```javascript
exports = {
  fetchOAuthData: async function(args) {
    try {
      const response = await $request.invokeTemplate('getOAuthResource', {
        context: {}
      });

      return { success: true, data: response.response };
    } catch (error) {
      console.error('OAuth API Error:', error);
      return { success: false, error: error.message };
    }
  }
};
```

**Freshservice variant:** Change `"support_ticket"` to `"service_ticket"`

---

## STRICT ENFORCEMENT RULES

### ❌ NEVER Generate These (Platform 2.3 Patterns):

```json
// WRONG - DO NOT GENERATE
{
  "whitelisted-domains": ["https://..."]  // ❌ DEPRECATED
}
```

```json
// WRONG - DO NOT GENERATE
{
  "product": {  // ❌ USE "modules" INSTEAD
    "freshdesk": {}
  }
}
```

```json
// WRONG - DO NOT GENERATE
{
  "platform-version": "2.3"  // ❌ USE "3.0"
}
```

### ✅ ALWAYS Generate These (Platform 3.0 Patterns):

```json
// CORRECT
{
  "platform-version": "3.0",
  "modules": {
    "common": {},
    "support_ticket": {}  // or service_ticket, deal, etc.
  },
  "engines": {
    "node": "18.20.8",
    "fdk": "9.7.4"
  }
}
```

---

## External API Call Pattern (NO WHITELISTED-DOMAINS!)

When user needs to call an external API:

### Step 1: Add request template to manifest
```json
{
  "modules": {
    "common": {
      "requests": {
        "myApiCall": {}
      }
    }
  }
}
```

### Step 2: Define request in config/requests.json
```json
{
  "myApiCall": {
    "schema": {
      "method": "GET",
      "host": "api.example.com",
      "path": "/endpoint",
      "headers": {
        "Authorization": "Bearer {{api_key}}"
      }
    }
  }
}
```

### Step 3: Call from backend
```javascript
const response = await $request.invokeTemplate('myApiCall', {
  context: {},
  body: JSON.stringify({ data: 'value' })
});
```

**NO `whitelisted-domains` NEEDED - Request templates handle external domains!**

---

## Module Adaptation Guide

When adapting templates for different products:

| User Says | Change Module To | Keep Everything Else Same |
|-----------|------------------|---------------------------|
| "Freshdesk ticket sidebar" | `support_ticket` | ✅ Use same base template |
| "Freshservice ticket sidebar" | `service_ticket` | ✅ Use same base template |
| "Freshservice asset sidebar" | `service_asset` | ✅ Use same base template |
| "Freshsales deal page" | `deal` | ✅ Use same base template |

**CRITICAL: Location Placement Rules**

**Common Module Locations (ONLY these):**
- `modules.common.location.full_page_app` ✅
- `modules.common.location.cti_global_sidebar` ✅ (Freshdesk only)

**Product Module Locations (NEVER in common):**
- Freshdesk ticket: `modules.support_ticket.location.ticket_sidebar` ✅
- Freshservice ticket: `modules.service_ticket.location.ticket_sidebar` ✅
- Freshservice asset: `modules.service_asset.location.asset_sidebar` ✅
- Freshsales deal: `modules.deal.location.deal_entity_menu` ✅

**❌ WRONG - Will cause validation error:**
```json
{
  "modules": {
    "common": {
      "location": {
        "ticket_sidebar": { ... }  // ❌ INVALID!
      }
    }
  }
}
```

**✅ CORRECT:**
```json
{
  "modules": {
    "common": {},
    "support_ticket": {
      "location": {
        "ticket_sidebar": { ... }  // ✅ CORRECT!
      }
    }
  }
}
```

---

## Required File Structure

**CRITICAL: Always generate complete folder structure!**

### Frontend App Minimum Files:
```
app/
├── index.html
├── scripts/
│   └── app.js
└── styles/
    ├── style.css
    └── images/
        └── icon.svg
```

### Serverless App Minimum Files:
```
server/
└── server.js
config/
└── iparams.json (if needed)
```

### Default icon.svg:
Use the Freshworks default icon from skeleton. If generating, create a simple SVG:
```xml
<svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 64 64">
  <rect width="64" height="64" fill="#2C5CC5"/>
  <text x="32" y="40" font-size="32" fill="white" text-anchor="middle" font-family="Arial">A</text>
</svg>
```

### style.css:
Always include basic styling:
```css
.main {
  padding: 20px;
}
```

## Template Selection Logic

```
IF user needs UI → Start with Template 1 (Frontend)
  IF also needs backend calls → Use Template 3 (Hybrid)
  IF needs OAuth → Use Template 4 (OAuth)

IF user needs NO UI → Start with Template 2 (Serverless)
  IF needs external API → Add requests to common module

ALWAYS:
  1. Start with correct skeleton
  2. Create complete folder structure
  3. Generate all required files (HTML, JS, CSS, icon.svg)
  4. Change module name based on product
  5. Add requests/functions as needed
  6. NEVER add whitelisted-domains
  7. NEVER use "product" structure
```

---

## Validation Checklist

Before generating any manifest.json, verify:

- [ ] `"platform-version": "3.0"` ✅
- [ ] `"modules"` structure (NOT "product") ✅
- [ ] At least one product module (even if empty `{}`) ✅
- [ ] `"engines"` block present ✅
- [ ] All requests declared in `"requests": {}` ✅
- [ ] All SMI functions declared in `"functions": {}` ✅
- [ ] NO `"whitelisted-domains"` ✅
- [ ] Correct module name for product ✅
- [ ] **Locations in correct module** ✅
  - `full_page_app` and `cti_global_sidebar` → `modules.common.location`
  - `ticket_sidebar`, `asset_sidebar`, etc. → `modules.<product>.location`
- [ ] **OAuth config has `integrations` wrapper** ✅
- [ ] **OAuth request template has `options.oauth` and `access_token` header** ✅
- [ ] **Complete folder structure generated** ✅
  - Frontend apps: `app/scripts/`, `app/styles/images/`
  - All apps: `icon.svg`, `style.css` files created

If ANY of these fail → REJECT and fix before generating!

---

## Critical Location Rules

**❌ VALIDATION ERROR: "Invalid location(s) mentioned in modules"**

This error means a location is in the wrong module!

**Common Module** (`modules.common.location`) - ONLY these:
- `full_page_app` ✅
- `cti_global_sidebar` ✅ (Freshdesk/Freshservice only)

**Product Module** (`modules.support_ticket.location`) - Product-specific:
- `ticket_sidebar` ✅
- `ticket_requester_info` ✅
- `ticket_background` ✅
- `ticket_top_navigation` ✅
- `asset_sidebar` ✅ (in `service_asset`)
- `deal_entity_menu` ✅ (in `deal`)

**Example of WRONG vs CORRECT:**

❌ **WRONG - Causes validation error:**
```json
{
  "modules": {
    "common": {
      "location": {
        "ticket_sidebar": { ... }  // ❌ INVALID!
      }
    },
    "support_ticket": {}
  }
}
```

✅ **CORRECT:**
```json
{
  "modules": {
    "common": {},
    "support_ticket": {
      "location": {
        "ticket_sidebar": { ... }  // ✅ CORRECT!
      }
    }
  }
}
```

---

## Critical OAuth Rules

**❌ VALIDATION ERROR: "OAuth config must have required property 'integrations'"**

This means `oauth_config.json` is missing the `integrations` wrapper!

**Platform 3.0 OAuth Structure:**

❌ **WRONG - Platform 2.x format:**
```json
{
  "client_id": "...",
  "client_secret": "...",
  "authorize_url": "...",
  "token_url": "..."
}
```

✅ **CORRECT - Platform 3.0 format:**
```json
{
  "integrations": {
    "oauth_name": {
      "display_name": "Service Name",
      "client_id": "{{client_id}}",
      "client_secret": "{{client_secret}}",
      "authorize_url": "https://...",
      "token_url": "https://...",
      "token_type": "account",
      "options": {
        "scope": "read"
      }
    }
  }
}
```

**OAuth Request Template:**

Must include:
1. `options.oauth` with OAuth config name
2. `Authorization` header with `<%= access_token %>`

```json
{
  "myOAuthRequest": {
    "schema": {
      "method": "GET",
      "host": "api.example.com",
      "path": "/resource",
      "headers": {
        "Authorization": "bearer <%= access_token %>"
      }
    },
    "options": {
      "oauth": "oauth_name"
    }
  }
}
```

---

## Crayons UI Enforcement

**ALL frontend apps MUST use Crayons components - NO exceptions!**

### Required in ALL HTML Files:
```html
<!-- REQUIRED: Crayons CDN -->
<script async type="module" src="https://cdn.jsdelivr.net/npm/@freshworks/crayons@v4/dist/crayons/crayons.esm.js"></script>
<script async nomodule src="https://cdn.jsdelivr.net/npm/@freshworks/crayons@v4/dist/crayons/crayons.js"></script>
```

### ❌ NEVER Use Plain HTML Elements:
```html
<!-- WRONG - DO NOT USE -->
<button>Click Me</button>
<input type="text" />
<select><option>Item</option></select>
<textarea></textarea>
```

### ✅ ALWAYS Use Crayons Components:
```html
<!-- CORRECT - USE THESE -->
<fw-button color="primary">Click Me</fw-button>
<fw-input label="Name" placeholder="Enter name"></fw-input>
<fw-select label="Choose"><fw-select-option value="1">Item</fw-select-option></fw-select>
<fw-textarea label="Description"></fw-textarea>
```

### Common Crayons Components:

**Buttons:**
```html
<fw-button color="primary">Primary Button</fw-button>
<fw-button color="secondary">Secondary Button</fw-button>
<fw-button color="danger">Delete</fw-button>
<fw-button color="link">Link Button</fw-button>
```

**Inputs:**
```html
<fw-input label="Email" type="email" placeholder="user@example.com" required></fw-input>
<fw-input label="Password" type="password" state="error" error-text="Invalid password"></fw-input>
```

**Select Dropdowns:**
```html
<fw-select label="Status" placeholder="Select status">
  <fw-select-option value="open">Open</fw-select-option>
  <fw-select-option value="closed">Closed</fw-select-option>
</fw-select>
```

**Labels & Text:**
```html
<fw-label value="User Information"></fw-label>
<fw-inline-message type="success">Data saved successfully!</fw-inline-message>
```

**Spinners & Progress:**
```html
<fw-spinner size="small"></fw-spinner>
<fw-progress-loader value="60" label="Processing..."></fw-progress-loader>
```

### Event Listeners for Crayons:
Crayons components use custom events with `fw` prefix:

```javascript
// Button click
document.getElementById('myBtn').addEventListener('fwClick', () => {
  console.log('Crayons button clicked');
});

// Input change
document.getElementById('myInput').addEventListener('fwInput', (e) => {
  console.log('Input value:', e.detail.value);
});

// Select change
document.getElementById('mySelect').addEventListener('fwChange', (e) => {
  console.log('Selected:', e.detail.value);
});
```

### Crayons Documentation Reference:
All Crayons components are documented in `references/common/crayons-docs/`
- `button.md` - Button component (fw-button)
- `input.md` - Input component (fw-input)
- `select.md` - Select dropdown (fw-select)
- `modal.md` - Modal dialog (fw-modal)
- `spinner.md` - Loading spinner (fw-spinner)
- And 50+ more components...

**If user needs UI, ALWAYS use Crayons. No plain HTML elements allowed!**
