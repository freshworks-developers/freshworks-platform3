---
description: Complete Platform 3.0 App Templates - Working code examples for all app types
alwaysApply: true
---

# Platform 3.0 App Templates

**CRITICAL ENFORCEMENT:**
- ‚ùå NEVER use `"whitelisted-domains"` - It's Platform 2.3 syntax, deprecated and invalid in 3.0
- ‚ùå NEVER use `"product"` structure - Use `"modules"` in Platform 3.0
- ‚ùå NEVER use plain HTML buttons/inputs - Use Crayons components ONLY
- ‚úÖ ALWAYS start with skeleton templates below
- ‚úÖ ALWAYS use `"modules"` structure
- ‚úÖ ALWAYS include `"engines"` block
- ‚úÖ ALWAYS use Crayons components for UI (fw-button, fw-input, fw-select, etc.)
- ‚úÖ ALWAYS include Crayons CDN in HTML files

---

## Understanding Product Context

When user says "Freshdesk app" or "Freshservice app":
- ‚ùå DOES NOT mean product-specific manifest structure
- ‚úÖ DOES mean use the appropriate module for that product

**Module Mapping:**
- "Freshdesk app" ‚Üí Use `support_ticket`, `support_contact`, etc. modules
- "Freshservice app" ‚Üí Use `service_ticket`, `service_asset`, etc. modules
- "Freshsales app" ‚Üí Use `deal`, `contact`, `account` modules

**Base template is ALWAYS the same - only the module name changes!**

---

## Template Selection Matrix

| User Need | Template | Modules to Use |
|-----------|----------|----------------|
| Frontend UI only | Template 1 (Frontend) | common + product module with location |
| Serverless events | Template 2 (Serverless) | common + product module with events |
| Frontend + Backend API | Template 3 (Hybrid) | common (requests + functions) + product module (location) |
| OAuth integration | Template 4 (OAuth) | common (requests + functions + oauth) + product module |

---

## When to Include Frontend (CRITICAL DECISION POINT)

**ALWAYS include frontend (Template 1 or 3) when:**
- ‚úÖ User needs to **view, configure, or interact** with the app
- ‚úÖ User needs to **see status, logs, or sync results**
- ‚úÖ User needs to **manually trigger actions** (buttons, forms)
- ‚úÖ User needs to **configure settings beyond iparams** (dynamic options, toggles)
- ‚úÖ App provides **dashboard, reports, or visualizations**
- ‚úÖ User mentions "UI", "interface", "page", "view", "dashboard", "panel", "sidebar"
- ‚úÖ App needs a **placement** (ticket_sidebar, full_page_app, etc.)

**Use serverless only (Template 2) when:**
- ‚ùå Pure automation with **zero user interaction**
- ‚ùå Background sync that **never needs monitoring**
- ‚ùå Webhook receiver with **no status display**
- ‚ùå Scheduled tasks with **no manual controls**
- ‚ùå User explicitly says "no UI needed" or "background only"

**Examples:**

| Use Case | Frontend? | Why? |
|----------|-----------|------|
| "Zapier contact sync with webhook" | ‚úÖ YES (Hybrid) | User needs to see sync status, manually trigger sync, configure which events to sync |
| "Auto-sync contacts to Zapier on create" | ‚úÖ YES (Hybrid) | User needs to monitor sync status, see errors, manually resync failed contacts |
| "Send webhook on ticket close" | ‚ùå NO (Serverless) | Pure automation, no user interaction needed |
| "Scheduled backup every night" | ‚ùå NO (Serverless) | Background task, no monitoring needed |
| "GitHub issue sync" | ‚úÖ YES (Hybrid) | User needs to see linked issues, manually create links, view sync status |
| "Slack notification on ticket create" | ‚ùå NO (Serverless) | Pure notification, no user interaction |

**Default Rule: When in doubt, include frontend (Hybrid).** Users almost always want to see what's happening.

---

## Code Quality Patterns (ALWAYS ENFORCE)

**These patterns prevent common FDK validation failures:**

### ‚úÖ Pattern 1: Proper Async Scoping
```javascript
// ‚ùå WRONG: Variable in different scope
let client;
async function init() {
  client = await app.initialized();  // Race condition!
}

// ‚úÖ CORRECT: IIFE pattern
(async function() {
  const client = await app.initialized();
  // Use client here
})();
```

### ‚úÖ Pattern 2: Low Complexity Functions
```javascript
// ‚ùå WRONG: Nested complexity > 7
async function process() {
  if (a) {
    if (b) {
      for (let i = 0; i < items.length; i++) {
        if (items[i].valid) {
          // Deep nesting
        }
      }
    }
  }
}

// ‚úÖ CORRECT: Extract helpers
async function process() {
  const validItems = getValidItems();
  return processItems(validItems);
}
```

### ‚úÖ Pattern 3: No Unused Parameters
```javascript
// ‚ùå WRONG: Unused 'args'
exports = {
  handler: function(args) {
    console.log('Called');  // args never used!
  }
}

// ‚úÖ CORRECT: Remove or use underscore
exports = {
  handler: function() {
    console.log('Called');
  }
}
```

### ‚úÖ Pattern 4: Always Generate Icon
```
MUST CREATE: app/styles/images/icon.svg
NEVER SKIP THIS FILE - FDK validation will fail!
```

---

## Template 1: Frontend App

**Use Case:** UI-only app with no backend logic

### App Structure
```
my-app/
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îú‚îÄ‚îÄ index.html
‚îÇ   ‚îú‚îÄ‚îÄ scripts/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ app.js
‚îÇ   ‚îî‚îÄ‚îÄ styles/
‚îÇ       ‚îú‚îÄ‚îÄ style.css
‚îÇ       ‚îî‚îÄ‚îÄ images/
‚îÇ           ‚îî‚îÄ‚îÄ icon.svg  ‚Üê ALWAYS CREATE THIS!
‚îú‚îÄ‚îÄ manifest.json
‚îî‚îÄ‚îÄ README.md
```

### manifest.json (CORRECT PLATFORM 3.0)
```json
{
  "platform-version": "3.0",
  "modules": {
    "common": {
      "requests": {}
    },
    "support_ticket": {
      "location": {
        "ticket_sidebar": {
          "url": "index.html",
          "icon": "styles/images/icon.svg"
        }
      }
    }
  },
  "engines": {
    "node": "18.20.8",
    "fdk": "9.7.4"
  }
}
```

### app/scripts/app.js
```javascript
// ‚úÖ CORRECT: Proper async scoping (no race conditions)
(async function() {
  const client = await app.initialized();
  
  client.events.on('app.activated', async () => {
    await renderText(client);
  });
  
  // ‚úÖ Keep function complexity low (‚â§ 7)
  async function renderText(client) {
    const textElement = document.getElementById('apptext');
    const contactData = await client.data.get('contact');
    const { contact: { name } } = contactData;
    
    textElement.innerHTML = `Ticket is created by ${name}`;
  }
})();
```

### app/index.html
```html
<!DOCTYPE html>
<html lang="en">
<head>
  <title>My App</title>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <script async src="{{{appclient}}}"></script>
  <link rel="stylesheet" type="text/css" href="styles/style.css" />
</head>
<body>
  <div class="main">
    <p id="apptext"></p>
  </div>
</body>
<script defer src="scripts/app.js"></script>
<!-- REQUIRED: Crayons CDN for UI components -->
<script async type="module" src="https://cdn.jsdelivr.net/npm/@freshworks/crayons@v4/dist/crayons/crayons.esm.js"></script>
<script async nomodule src="https://cdn.jsdelivr.net/npm/@freshworks/crayons@v4/dist/crayons/crayons.js"></script>
</html>
```

### app/styles/style.css
```css
.main {
  padding: 20px;
  font-family: Arial, sans-serif;
}
```

### app/styles/images/icon.svg
```xml
<svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 64 64">
  <rect width="64" height="64" fill="#2C5CC5"/>
  <text x="32" y="40" font-size="32" fill="white" text-anchor="middle" font-family="Arial">A</text>
</svg>
```

**Freshservice variant:** Change `"support_ticket"` to `"service_ticket"`
**Freshsales variant:** Change `"support_ticket"` to `"deal"` or `"contact"`

---

## Template 2: Serverless App

**Use Case:** Backend-only app with events, no UI

### App Structure
```
my-serverless-app/
‚îú‚îÄ‚îÄ server/
‚îÇ   ‚îî‚îÄ‚îÄ server.js
‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îî‚îÄ‚îÄ iparams.json
‚îú‚îÄ‚îÄ manifest.json
‚îî‚îÄ‚îÄ README.md
```

### manifest.json (CORRECT PLATFORM 3.0)
```json
{
  "platform-version": "3.0",
  "modules": {
    "common": {
      "events": {
        "onAppInstall": {
          "handler": "onAppInstallHandler"
        },
        "onAppUninstall": {
          "handler": "onAppUninstallHandler"
        }
      }
    },
    "support_ticket": {
      "events": {
        "onTicketCreate": {
          "handler": "onTicketCreateHandler"
        }
      }
    }
  },
  "engines": {
    "node": "18.20.8",
    "fdk": "9.7.4"
  }
}
```

### server/server.js
```javascript
// ‚úÖ CORRECT: Only include parameters you actually use
// ‚úÖ Keep function complexity low (‚â§ 7)
exports = {
  // Uses args - keep parameter
  onTicketCreateHandler: function(args) {
    const requesterName = args.data.requester.name;
    console.log('Hello ' + requesterName);
  },
  
  // Uses args - keep parameter
  onAppInstallHandler: function(args) {
    console.info('onAppInstallHandler invoked', args);
  },
  
  // Doesn't use args - remove parameter
  onAppUninstallHandler: function() {
    console.log('onAppUninstallHandler invoked');
  }
};

// ‚úÖ If handler signature REQUIRES parameter but you don't use it:
// Use underscore prefix to indicate intentionally unused
exports = {
  myHandler: function(_args) {
    // _args indicates intentionally unused
    console.log('Handler called');
  }
};
```

**Freshservice variant:** Change `"support_ticket"` to `"service_ticket"` and use `onTicketCreate` event

**Adding External API calls:**
```json
{
  "modules": {
    "common": {
      "requests": {
        "notifyExternalService": {}
      }
    }
  }
}
```

---

## Template 3: Hybrid App (Frontend + Backend SMI)

**Use Case:** Frontend UI that calls backend methods for external API calls

### App Structure
```
my-hybrid-app/
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îú‚îÄ‚îÄ index.html
‚îÇ   ‚îú‚îÄ‚îÄ scripts/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ app.js
‚îÇ   ‚îî‚îÄ‚îÄ styles/
‚îÇ       ‚îú‚îÄ‚îÄ style.css
‚îÇ       ‚îî‚îÄ‚îÄ images/
‚îÇ           ‚îî‚îÄ‚îÄ icon.svg
‚îú‚îÄ‚îÄ server/
‚îÇ   ‚îî‚îÄ‚îÄ server.js
‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îú‚îÄ‚îÄ iparams.json
‚îÇ   ‚îî‚îÄ‚îÄ requests.json
‚îú‚îÄ‚îÄ manifest.json
‚îî‚îÄ‚îÄ README.md
```

### manifest.json (CORRECT PLATFORM 3.0)
```json
{
  "platform-version": "3.0",
  "modules": {
    "common": {
      "requests": {
        "externalApiCall": {}
      },
      "functions": {
        "fetchExternalData": {}
      }
    },
    "support_ticket": {
      "location": {
        "ticket_sidebar": {
          "url": "index.html",
          "icon": "styles/images/icon.svg"
        }
      }
    }
  },
  "engines": {
    "node": "18.20.8",
    "fdk": "9.7.4"
  }
}
```

### config/requests.json
```json
{
  "externalApiCall": {
    "schema": {
      "method": "GET",
      "host": "api.example.com",
      "path": "/data",
      "headers": {
        "Authorization": "Bearer {{api_key}}"
      }
    }
  }
}
```

### config/iparams.json
```json
{
  "api_key": {
    "display_name": "API Key",
    "description": "Enter your API key",
    "type": "text",
    "required": true,
    "secure": true
  }
}
```

### app/index.html
```html
<!DOCTYPE html>
<html lang="en">
<head>
  <title>Hybrid App</title>
  <meta charset="UTF-8" />
  <script async src="{{{appclient}}}"></script>
  <link rel="stylesheet" href="styles/style.css" />
</head>
<body>
  <div class="main">
    <fw-label value="Fetch Data from External API"></fw-label>
    <fw-button id="btnFetch" color="primary">Fetch Data</fw-button>
    <div id="result"></div>
  </div>
</body>
<script defer src="scripts/app.js"></script>
<!-- REQUIRED: Crayons CDN -->
<script async type="module" src="https://cdn.jsdelivr.net/npm/@freshworks/crayons@v4/dist/crayons/crayons.esm.js"></script>
<script async nomodule src="https://cdn.jsdelivr.net/npm/@freshworks/crayons@v4/dist/crayons/crayons.js"></script>
</html>
```

### app/scripts/app.js
```javascript
let client;

init();

async function init() {
  client = await app.initialized();
  client.events.on('app.activated', onAppActivate);
}

function onAppActivate() {
  // Use Crayons button event listener
  const btn = document.getElementById('btnFetch');
  btn.addEventListener('fwClick', fetchData);
}

async function fetchData() {
  try {
    const result = await client.request.invoke('fetchExternalData', {
      param1: 'value1'
    });
    document.getElementById('result').innerHTML = JSON.stringify(result);
  } catch (error) {
    console.error('Error:', error);
  }
}
```

### server/server.js
```javascript
exports = {
  fetchExternalData: async function(args) {
    const { param1 } = args;
    const iparams = args.iparams;

    try {
      const response = await $request.invokeTemplate('externalApiCall', {
        context: {},
        body: JSON.stringify({ query: param1 })
      });

      return { success: true, data: response.response };
    } catch (error) {
      console.error('API Error:', error);
      return { success: false, error: error.message };
    }
  }
};
```

**Freshservice variant:** Change `"support_ticket"` to `"service_ticket"`

---

## Template 4: OAuth App

**Use Case:** Third-party OAuth integration (GitHub, Jira, etc.)

**CRITICAL: Platform 3.0 OAuth requires `integrations` wrapper!**

### App Structure
```
my-oauth-app/
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îú‚îÄ‚îÄ index.html
‚îÇ   ‚îú‚îÄ‚îÄ scripts/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ app.js
‚îÇ   ‚îî‚îÄ‚îÄ styles/
‚îÇ       ‚îú‚îÄ‚îÄ style.css
‚îÇ       ‚îî‚îÄ‚îÄ images/
‚îÇ           ‚îî‚îÄ‚îÄ icon.svg
‚îú‚îÄ‚îÄ server/
‚îÇ   ‚îî‚îÄ‚îÄ server.js
‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îú‚îÄ‚îÄ iparams.json
‚îÇ   ‚îú‚îÄ‚îÄ requests.json
‚îÇ   ‚îî‚îÄ‚îÄ oauth_config.json
‚îú‚îÄ‚îÄ manifest.json
‚îî‚îÄ‚îÄ README.md
```

### manifest.json (CORRECT PLATFORM 3.0)
```json
{
  "platform-version": "3.0",
  "modules": {
    "common": {
      "requests": {
        "getOAuthResource": {}
      },
      "functions": {
        "fetchOAuthData": {}
      }
    },
    "support_ticket": {
      "location": {
        "ticket_sidebar": {
          "url": "index.html",
          "icon": "styles/images/icon.svg"
        }
      }
    }
  },
  "engines": {
    "node": "18.20.8",
    "fdk": "9.7.4"
  }
}
```

### config/oauth_config.json
```json
{
  "integrations": {
    "github": {
      "display_name": "GitHub",
      "client_id": "{{client_id}}",
      "client_secret": "{{client_secret}}",
      "authorize_url": "https://github.com/login/oauth/authorize",
      "token_url": "https://github.com/login/oauth/access_token",
      "token_type": "account",
      "options": {
        "scope": "repo"
      }
    }
  }
}
```

### config/requests.json
```json
{
  "getOAuthResource": {
    "schema": {
      "method": "GET",
      "host": "api.github.com",
      "path": "/user/repos",
      "headers": {
        "Authorization": "bearer <%= access_token %>"
      }
    },
    "options": {
      "oauth": "github"
    }
  }
}
```

### config/iparams.json
```json
{
  "client_id": {
    "display_name": "GitHub Client ID",
    "description": "Enter your GitHub OAuth App Client ID",
    "type": "text",
    "required": true
  },
  "client_secret": {
    "display_name": "GitHub Client Secret",
    "description": "Enter your GitHub OAuth App Client Secret",
    "type": "text",
    "required": true,
    "secure": true
  }
}
```

### server/server.js
```javascript
exports = {
  fetchOAuthData: async function(args) {
    try {
      const response = await $request.invokeTemplate('getOAuthResource', {
        context: {}
      });

      return { success: true, data: response.response };
    } catch (error) {
      console.error('OAuth API Error:', error);
      return { success: false, error: error.message };
    }
  }
};
```

**Freshservice variant:** Change `"support_ticket"` to `"service_ticket"`

---

## STRICT ENFORCEMENT RULES

### ‚ùå NEVER Generate These (Platform 2.3 Patterns):

```json
// WRONG - DO NOT GENERATE
{
  "whitelisted-domains": ["https://..."]  // ‚ùå DEPRECATED
}
```

```json
// WRONG - DO NOT GENERATE
{
  "product": {  // ‚ùå USE "modules" INSTEAD
    "freshdesk": {}
  }
}
```

```json
// WRONG - DO NOT GENERATE
{
  "platform-version": "2.3"  // ‚ùå USE "3.0"
}
```

### ‚úÖ ALWAYS Generate These (Platform 3.0 Patterns):

```json
// CORRECT
{
  "platform-version": "3.0",
  "modules": {
    "common": {},
    "support_ticket": {}  // or service_ticket, deal, etc.
  },
  "engines": {
    "node": "18.20.8",
    "fdk": "9.7.4"
  }
}
```

---

## External API Call Pattern (NO WHITELISTED-DOMAINS!)

When user needs to call an external API:

### Step 1: Add request template to manifest
```json
{
  "modules": {
    "common": {
      "requests": {
        "myApiCall": {}
      }
    }
  }
}
```

### Step 2: Define request in config/requests.json
```json
{
  "myApiCall": {
    "schema": {
      "method": "GET",
      "host": "api.example.com",
      "path": "/endpoint",
      "headers": {
        "Authorization": "Bearer {{api_key}}"
      }
    }
  }
}
```

### Step 3: Call from backend
```javascript
const response = await $request.invokeTemplate('myApiCall', {
  context: {},
  body: JSON.stringify({ data: 'value' })
});
```

**NO `whitelisted-domains` NEEDED - Request templates handle external domains!**

---

## Module Adaptation Guide

When adapting templates for different products:

| User Says | Change Module To | Keep Everything Else Same |
|-----------|------------------|---------------------------|
| "Freshdesk ticket sidebar" | `support_ticket` | ‚úÖ Use same base template |
| "Freshservice ticket sidebar" | `service_ticket` | ‚úÖ Use same base template |
| "Freshservice asset sidebar" | `service_asset` | ‚úÖ Use same base template |
| "Freshsales deal page" | `deal` | ‚úÖ Use same base template |

**CRITICAL: Location Placement Rules**

**Common Module Locations (ONLY these):**
- `modules.common.location.full_page_app` ‚úÖ
- `modules.common.location.cti_global_sidebar` ‚úÖ (Freshdesk only)

**Product Module Locations (NEVER in common):**
- Freshdesk ticket: `modules.support_ticket.location.ticket_sidebar` ‚úÖ
- Freshservice ticket: `modules.service_ticket.location.ticket_sidebar` ‚úÖ
- Freshservice asset: `modules.service_asset.location.asset_sidebar` ‚úÖ
- Freshsales deal: `modules.deal.location.deal_entity_menu` ‚úÖ

**‚ùå WRONG - Will cause validation error:**
```json
{
  "modules": {
    "common": {
      "location": {
        "ticket_sidebar": { ... }  // ‚ùå INVALID!
      }
    }
  }
}
```

**‚úÖ CORRECT:**
```json
{
  "modules": {
    "common": {},
    "support_ticket": {
      "location": {
        "ticket_sidebar": { ... }  // ‚úÖ CORRECT!
      }
    }
  }
}
```

---

## Required File Structure

**CRITICAL: Always generate complete folder structure!**

### Frontend App Minimum Files:
```
app/
‚îú‚îÄ‚îÄ index.html
‚îú‚îÄ‚îÄ scripts/
‚îÇ   ‚îî‚îÄ‚îÄ app.js
‚îî‚îÄ‚îÄ styles/
    ‚îú‚îÄ‚îÄ style.css
    ‚îî‚îÄ‚îÄ images/
        ‚îî‚îÄ‚îÄ icon.svg
```

### Serverless App Minimum Files:
```
server/
‚îî‚îÄ‚îÄ server.js
config/
‚îî‚îÄ‚îÄ iparams.json (if needed)
```

### Default icon.svg:
Use the Freshworks default icon from skeleton. If generating, create a simple SVG:
```xml
<svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 64 64">
  <rect width="64" height="64" fill="#2C5CC5"/>
  <text x="32" y="40" font-size="32" fill="white" text-anchor="middle" font-family="Arial">A</text>
</svg>
```

### style.css:
Always include basic styling:
```css
.main {
  padding: 20px;
}
```

## Template Selection Logic

```
IF user needs UI ‚Üí Start with Template 1 (Frontend)
  IF also needs backend calls ‚Üí Use Template 3 (Hybrid)
  IF needs OAuth ‚Üí Use Template 4 (OAuth)

IF user needs NO UI ‚Üí Start with Template 2 (Serverless)
  IF needs external API ‚Üí Add requests to common module

ALWAYS:
  1. Start with correct skeleton
  2. Create complete folder structure
  3. Generate all required files (HTML, JS, CSS, icon.svg)
  4. Change module name based on product
  5. Add requests/functions as needed
  6. NEVER add whitelisted-domains
  7. NEVER use "product" structure
```

---

## Validation Checklist

Before generating any manifest.json, verify:

### Platform 3.0 Structure
- [ ] `"platform-version": "3.0"` ‚úÖ
- [ ] `"modules"` structure (NOT "product") ‚úÖ
- [ ] At least one product module (even if empty `{}`) ‚úÖ
- [ ] `"engines"` block present ‚úÖ
- [ ] All requests declared in `"requests": {}` ‚úÖ
- [ ] All SMI functions declared in `"functions": {}` ‚úÖ
- [ ] NO `"whitelisted-domains"` ‚úÖ
- [ ] Correct module name for product ‚úÖ
- [ ] **Locations in correct module** ‚úÖ
  - `full_page_app` and `cti_global_sidebar` ‚Üí `modules.common.location`
  - `ticket_sidebar`, `asset_sidebar`, etc. ‚Üí `modules.<product>.location`
- [ ] **OAuth config has `integrations` wrapper** ‚úÖ
- [ ] **OAuth request template has `options.oauth` and `access_token` header** ‚úÖ

### File Structure (CRITICAL - Common Failures!)
- [ ] **Complete folder structure generated** ‚úÖ
  - Frontend apps: `app/scripts/`, `app/styles/images/`
- [ ] **icon.svg ALWAYS created** ‚úÖ - `app/styles/images/icon.svg`
- [ ] **style.css created** ‚úÖ - `app/styles/style.css`
- [ ] **All HTML, JS files created** ‚úÖ

### Code Quality (Based on Real Failures!)
- [ ] **Function complexity ‚â§ 7** ‚úÖ
  - Break complex functions into helpers
  - Extract nested logic
- [ ] **No async variable scoping issues** ‚úÖ
  - Use IIFE pattern: `(async function() { ... })()`
  - Declare variables in same scope
- [ ] **No unused parameters** ‚úÖ
  - Remove unused parameters
  - Or use underscore prefix: `_args`
- [ ] **Only use `async` when you `await`** ‚úÖ
  - Remove `async` keyword if no `await` inside
  - Lint error: "Async function has no 'await' expression"
- [ ] **NEVER use deprecated Request API methods** ‚úÖ
  - ‚ùå NO `$request.post()`, `.get()`, `.put()`, `.delete()`
  - ‚úÖ ALWAYS use `$request.invokeTemplate()`
  - Platform error: "post is no longer supported in Request API"
- [ ] **Proper error handling** ‚úÖ
  - Use try/catch blocks
  - Handle API failures gracefully

### Crayons UI (Frontend Only)
- [ ] **Crayons CDN included** ‚úÖ
- [ ] **Use fw-* components** ‚úÖ
- [ ] **NO plain HTML elements** ‚úÖ

If ANY of these fail ‚Üí REJECT and fix before generating!

---

## Critical Location Rules

**‚ùå VALIDATION ERROR: "Invalid location(s) mentioned in modules"**

This error means a location is in the wrong module!

**Common Module** (`modules.common.location`) - ONLY these:
- `full_page_app` ‚úÖ
- `cti_global_sidebar` ‚úÖ (Freshdesk/Freshservice only)

**Product Module** (`modules.support_ticket.location`) - Product-specific:
- `ticket_sidebar` ‚úÖ
- `ticket_requester_info` ‚úÖ
- `ticket_background` ‚úÖ
- `ticket_top_navigation` ‚úÖ
- `asset_sidebar` ‚úÖ (in `service_asset`)
- `deal_entity_menu` ‚úÖ (in `deal`)

**Example of WRONG vs CORRECT:**

‚ùå **WRONG - Causes validation error:**
```json
{
  "modules": {
    "common": {
      "location": {
        "ticket_sidebar": { ... }  // ‚ùå INVALID!
      }
    },
    "support_ticket": {}
  }
}
```

‚úÖ **CORRECT:**
```json
{
  "modules": {
    "common": {},
    "support_ticket": {
      "location": {
        "ticket_sidebar": { ... }  // ‚úÖ CORRECT!
      }
    }
  }
}
```

---

## Critical OAuth Rules

**‚ùå VALIDATION ERROR: "OAuth config must have required property 'integrations'"**

This means `oauth_config.json` is missing the `integrations` wrapper!

**Platform 3.0 OAuth Structure:**

‚ùå **WRONG - Platform 2.x format:**
```json
{
  "client_id": "...",
  "client_secret": "...",
  "authorize_url": "...",
  "token_url": "..."
}
```

‚úÖ **CORRECT - Platform 3.0 format:**
```json
{
  "integrations": {
    "oauth_name": {
      "display_name": "Service Name",
      "client_id": "{{client_id}}",
      "client_secret": "{{client_secret}}",
      "authorize_url": "https://...",
      "token_url": "https://...",
      "token_type": "account",
      "options": {
        "scope": "read"
      }
    }
  }
}
```

**OAuth Request Template:**

Must include:
1. `options.oauth` with OAuth config name
2. `Authorization` header with `<%= access_token %>`

```json
{
  "myOAuthRequest": {
    "schema": {
      "method": "GET",
      "host": "api.example.com",
      "path": "/resource",
      "headers": {
        "Authorization": "bearer <%= access_token %>"
      }
    },
    "options": {
      "oauth": "oauth_name"
    }
  }
}
```

---

## Critical Request API Rules

**‚ùå VALIDATION ERROR: "post is no longer supported in Request API"**

This means you're using deprecated Platform 2.x request methods!

**Platform 2.x Deprecated Methods (NEVER USE):**

‚ùå **WRONG - Platform 2.x format:**
```javascript
// These methods are DEPRECATED and will cause errors!
$request.post('https://api.example.com/endpoint', options)
$request.get('https://api.example.com/data', options)
$request.put('https://api.example.com/update', options)
$request.delete('https://api.example.com/remove', options)
```

‚úÖ **CORRECT - Platform 3.0 format:**

**Step 1: Define request template in `config/requests.json`:**
```json
{
  "myApiCall": {
    "schema": {
      "method": "POST",
      "host": "api.example.com",
      "path": "/endpoint",
      "headers": {
        "Authorization": "Bearer {{api_key}}",
        "Content-Type": "application/json"
      }
    }
  }
}
```

**Step 2: Use in `server/server.js`:**
```javascript
exports = {
  myHandler: async function(args) {
    try {
      const response = await $request.invokeTemplate('myApiCall', {
        context: {},
        body: JSON.stringify({ data: 'value' })
      });
      
      return { success: true, data: response.response };
    } catch (error) {
      console.error('API Error:', error);
      return { success: false, error: error.message };
    }
  }
};
```

**Key Points:**
- ‚ùå NEVER use `$request.post()`, `.get()`, `.put()`, `.delete()`
- ‚úÖ ALWAYS use `$request.invokeTemplate('templateName', options)`
- Define all external API calls in `config/requests.json`
- Reference templates by name in server code

---

## Crayons UI Enforcement

**ALL frontend apps MUST use Crayons components - NO exceptions!**

### Required in ALL HTML Files:
```html
<!-- REQUIRED: Crayons CDN -->
<script async type="module" src="https://cdn.jsdelivr.net/npm/@freshworks/crayons@v4/dist/crayons/crayons.esm.js"></script>
<script async nomodule src="https://cdn.jsdelivr.net/npm/@freshworks/crayons@v4/dist/crayons/crayons.js"></script>
```

### ‚ùå NEVER Use Plain HTML Elements:
```html
<!-- WRONG - DO NOT USE -->
<button>Click Me</button>
<input type="text" />
<select><option>Item</option></select>
<textarea></textarea>
```

### ‚úÖ ALWAYS Use Crayons Components:
```html
<!-- CORRECT - USE THESE -->
<fw-button color="primary">Click Me</fw-button>
<fw-input label="Name" placeholder="Enter name"></fw-input>
<fw-select label="Choose"><fw-select-option value="1">Item</fw-select-option></fw-select>
<fw-textarea label="Description"></fw-textarea>
```

### Common Crayons Components:

**Buttons:**
```html
<fw-button color="primary">Primary Button</fw-button>
<fw-button color="secondary">Secondary Button</fw-button>
<fw-button color="danger">Delete</fw-button>
<fw-button color="link">Link Button</fw-button>
```

**Inputs:**
```html
<fw-input label="Email" type="email" placeholder="user@example.com" required></fw-input>
<fw-input label="Password" type="password" state="error" error-text="Invalid password"></fw-input>
```

**Select Dropdowns:**
```html
<fw-select label="Status" placeholder="Select status">
  <fw-select-option value="open">Open</fw-select-option>
  <fw-select-option value="closed">Closed</fw-select-option>
</fw-select>
```

**Labels & Text:**
```html
<fw-label value="User Information"></fw-label>
<fw-inline-message type="success">Data saved successfully!</fw-inline-message>
```

**Spinners & Progress:**
```html
<fw-spinner size="small"></fw-spinner>
<fw-progress-loader value="60" label="Processing..."></fw-progress-loader>
```

### Event Listeners for Crayons:
Crayons components use custom events with `fw` prefix:

```javascript
// Button click
document.getElementById('myBtn').addEventListener('fwClick', () => {
  console.log('Crayons button clicked');
});

// Input change
document.getElementById('myInput').addEventListener('fwInput', (e) => {
  console.log('Input value:', e.detail.value);
});

// Select change
document.getElementById('mySelect').addEventListener('fwChange', (e) => {
  console.log('Selected:', e.detail.value);
});
```

### Crayons Documentation Reference:
All Crayons components are documented in `references/common/crayons-docs/`
- `button.md` - Button component (fw-button)
- `input.md` - Input component (fw-input)
- `select.md` - Select dropdown (fw-select)
- `modal.md` - Modal dialog (fw-modal)
- `spinner.md` - Loading spinner (fw-spinner)
- And 50+ more components...

**If user needs UI, ALWAYS use Crayons. No plain HTML elements allowed!**

---

## After Generating the App

**ALWAYS include this message after successfully generating an app:**

```
‚úÖ App generated successfully!

üìñ **Next Steps:**

The README.md file contains comprehensive setup instructions, including:
- How to configure installation parameters (iparams)
- How to set up OAuth credentials (if applicable)
- How to configure external API keys and request templates
- How to test the app locally using `fdk run`
- How to validate the app using `fdk validate`
- Product-specific setup requirements

Please review the README.md file before testing the app.

To test the app:
1. Install FDK if not already installed: `npm install -g @freshworks/fdk`
2. Navigate to the app directory
3. Run: `fdk run`
4. Follow the prompts to select your product and test account
```

**Include this message to guide users to the documentation you've generated.**
